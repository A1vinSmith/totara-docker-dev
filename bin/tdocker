#!/bin/bash

SCRIPTPATH="$( cd "$(dirname "$0")" ; pwd -P )"
PROJECTPATH="$( cd $SCRIPTPATH && cd ..; pwd -P )"

# if there's a docker-sync folder we assume that
# the docker-sync configuration should be used
if [ -d "$PROJECTPATH/.docker-sync" ]
then
    cd $PROJECTPATH; docker-compose \
        -f docker-compose.yml \
        -f compose/nginx.yml \
        -f compose/mariadb.yml \
        -f compose/mssql.yml \
        -f compose/mysql.yml \
        -f compose/pgsql.yml \
        -f compose/php.yml \
        -f compose/selenium.yml \
        -f compose/sync.yml "$@"
else
    cd $PROJECTPATH; docker-compose "$@"
fi